{
  "id": "7cb4a370-3a0a-4833-a168-c5f66918a2f6",
  "prevId": "d6b46e52-7652-4a56-8710-dfd991962120",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.agents": {
      "name": "agents",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'idle'"
        },
        "current_task_id": {
          "name": "current_task_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "last_heartbeat": {
          "name": "last_heartbeat",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "agents_current_task_id_tasks_id_fk": {
          "name": "agents_current_task_id_tasks_id_fk",
          "tableFrom": "agents",
          "tableTo": "tasks",
          "columnsFrom": ["current_task_id"],
          "columnsTo": ["id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.artifacts": {
      "name": "artifacts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "run_id": {
          "name": "run_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "ref": {
          "name": "ref",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "url": {
          "name": "url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "artifacts_run_id_runs_id_fk": {
          "name": "artifacts_run_id_runs_id_fk",
          "tableFrom": "artifacts",
          "tableTo": "runs",
          "columnsFrom": ["run_id"],
          "columnsTo": ["id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.config": {
      "name": "config",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "max_concurrent_workers": {
          "name": "max_concurrent_workers",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'10'"
        },
        "daily_token_limit": {
          "name": "daily_token_limit",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'50000000'"
        },
        "hourly_token_limit": {
          "name": "hourly_token_limit",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'5000000'"
        },
        "task_token_limit": {
          "name": "task_token_limit",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'1000000'"
        },
        "dispatcher_enabled": {
          "name": "dispatcher_enabled",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'true'"
        },
        "judge_enabled": {
          "name": "judge_enabled",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'true'"
        },
        "cycle_manager_enabled": {
          "name": "cycle_manager_enabled",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'true'"
        },
        "worker_count": {
          "name": "worker_count",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'1'"
        },
        "tester_count": {
          "name": "tester_count",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'1'"
        },
        "docser_count": {
          "name": "docser_count",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'1'"
        },
        "judge_count": {
          "name": "judge_count",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'1'"
        },
        "planner_count": {
          "name": "planner_count",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'1'"
        },
        "repo_mode": {
          "name": "repo_mode",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'git'"
        },
        "repo_url": {
          "name": "repo_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "''"
        },
        "local_repo_path": {
          "name": "local_repo_path",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "''"
        },
        "local_worktree_root": {
          "name": "local_worktree_root",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "''"
        },
        "judge_mode": {
          "name": "judge_mode",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'auto'"
        },
        "local_policy_max_lines": {
          "name": "local_policy_max_lines",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'5000'"
        },
        "local_policy_max_files": {
          "name": "local_policy_max_files",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'100'"
        },
        "base_branch": {
          "name": "base_branch",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'main'"
        },
        "opencode_model": {
          "name": "opencode_model",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'google/gemini-3-flash-preview'"
        },
        "opencode_wait_on_quota": {
          "name": "opencode_wait_on_quota",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'true'"
        },
        "opencode_quota_retry_delay_ms": {
          "name": "opencode_quota_retry_delay_ms",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'30000'"
        },
        "opencode_max_quota_waits": {
          "name": "opencode_max_quota_waits",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'-1'"
        },
        "planner_model": {
          "name": "planner_model",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'google/gemini-3-pro-preview'"
        },
        "judge_model": {
          "name": "judge_model",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'google/gemini-3-pro-preview'"
        },
        "worker_model": {
          "name": "worker_model",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'google/gemini-3-flash-preview'"
        },
        "planner_use_remote": {
          "name": "planner_use_remote",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'false'"
        },
        "planner_repo_url": {
          "name": "planner_repo_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "''"
        },
        "auto_replan": {
          "name": "auto_replan",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'true'"
        },
        "replan_requirement_path": {
          "name": "replan_requirement_path",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'requirement.md'"
        },
        "replan_interval_ms": {
          "name": "replan_interval_ms",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'60000'"
        },
        "replan_command": {
          "name": "replan_command",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pnpm --filter @openTiger/planner start'"
        },
        "replan_workdir": {
          "name": "replan_workdir",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "''"
        },
        "replan_repo_url": {
          "name": "replan_repo_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "''"
        },
        "github_token": {
          "name": "github_token",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "''"
        },
        "github_owner": {
          "name": "github_owner",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "''"
        },
        "github_repo": {
          "name": "github_repo",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "''"
        },
        "anthropic_api_key": {
          "name": "anthropic_api_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "''"
        },
        "gemini_api_key": {
          "name": "gemini_api_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "''"
        },
        "openai_api_key": {
          "name": "openai_api_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "''"
        },
        "xai_api_key": {
          "name": "xai_api_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "''"
        },
        "deepseek_api_key": {
          "name": "deepseek_api_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "''"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.cycles": {
      "name": "cycles",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "number": {
          "name": "number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'running'"
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "ended_at": {
          "name": "ended_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "trigger_type": {
          "name": "trigger_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "state_snapshot": {
          "name": "state_snapshot",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "stats": {
          "name": "stats",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "end_reason": {
          "name": "end_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.events": {
      "name": "events",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "entity_type": {
          "name": "entity_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "entity_id": {
          "name": "entity_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "agent_id": {
          "name": "agent_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "payload": {
          "name": "payload",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.leases": {
      "name": "leases",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "task_id": {
          "name": "task_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "agent_id": {
          "name": "agent_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "leases_task_id_tasks_id_fk": {
          "name": "leases_task_id_tasks_id_fk",
          "tableFrom": "leases",
          "tableTo": "tasks",
          "columnsFrom": ["task_id"],
          "columnsTo": ["id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "leases_task_id_unique": {
          "name": "leases_task_id_unique",
          "nullsNotDistinct": false,
          "columns": ["task_id"]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.runs": {
      "name": "runs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "task_id": {
          "name": "task_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "agent_id": {
          "name": "agent_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'running'"
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "finished_at": {
          "name": "finished_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "cost_tokens": {
          "name": "cost_tokens",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "log_path": {
          "name": "log_path",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "judged_at": {
          "name": "judged_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "judgement_version": {
          "name": "judgement_version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        }
      },
      "indexes": {},
      "foreignKeys": {
        "runs_task_id_tasks_id_fk": {
          "name": "runs_task_id_tasks_id_fk",
          "tableFrom": "runs",
          "tableTo": "tasks",
          "columnsFrom": ["task_id"],
          "columnsTo": ["id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.tasks": {
      "name": "tasks",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "goal": {
          "name": "goal",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "context": {
          "name": "context",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "allowed_paths": {
          "name": "allowed_paths",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "commands": {
          "name": "commands",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "priority": {
          "name": "priority",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "risk_level": {
          "name": "risk_level",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'low'"
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'worker'"
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'queued'"
        },
        "block_reason": {
          "name": "block_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "target_area": {
          "name": "target_area",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "touches": {
          "name": "touches",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'"
        },
        "dependencies": {
          "name": "dependencies",
          "type": "uuid[]",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'"
        },
        "timebox_minutes": {
          "name": "timebox_minutes",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 60
        },
        "retry_count": {
          "name": "retry_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {},
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}
